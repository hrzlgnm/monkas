{
    $schema: 'https://docs.renovatebot.com/renovate-schema.json',
    extends: [
        'config:best-practices',
        'security:openssf-scorecard',
        ':automergeDigest',
        ':automergeMinor',
        ':automergePr',
        ':automergeRequireAllStatusChecks',
        ':combinePatchMinorReleases',
        ':docker',
        ':enableVulnerabilityAlerts',
        ':maintainLockFilesMonthly',
        ':prConcurrentLimitNone',
        ':prImmediately',
        ':rebaseStalePrs',
        ':semanticCommits',
        ':separateMajorReleases',
    ],
    customManagers: [
        {
            customType: 'regex',
            managerFilePatterns: [
                '/^\\.github/docker/.*/Dockerfile$/',
            ],
            matchStringsStrategy: 'any',
            matchStrings: [
                'pip\\s+install(\\s+--[^\\s]+)+?\\s+(?<depName>[^\\s]+?)==(?<currentValue>.+?)\\s'
            ],
            datasourceTemplate: 'pypi'
        },
        {
            customType: 'regex',
            managerFilePatterns: [
                '/CMakeLists\\.txt$/',
                '/.*\\.cmake$/'
            ],
            matchStrings: [
                'FetchContent_Declare[ \\s]*\\([^)]*GIT_REPOSITORY[ \\s]*"https:\\/\\/github\\.com\\/(?<packageName>[^"]*?)(.git)?"[^)]*GIT_TAG[ \\s]*"(?<currentValue>[^"]*)'
            ],
            packageNameTemplate: '{{#if (equals currentValue.length 40)}}https://github.com/{{packageName}}.git{{else}}{{packageName}}{{/if}}',
            datasourceTemplate: '{{#if (equals currentValue.length 40)}}git-refs{{else}}github-tags{{/if}}',
            versioningTemplate: '{{#if (equals currentValue.length 40)}}git{{else}}loose{{/if}}'
        }

    ]
}
